{"version":3,"sources":["components/TableBlock/TableBlock.module.scss","components/TotalTable/TotalTable.module.scss","components/App/App.module.scss","helpers/fixedNum.js","components/TableBlock/TableBlock.jsx","components/TotalTable/TotalTable.jsx","components/App/App.jsx","index.js"],"names":["module","exports","fixedNum","num","symbols","parseFloat","Number","toFixed","TableBlock","data","coinsPrice","Object","keys","map","coin","orderAmount","reduce","reducer","row","total","currentValue","diff","percentage","percentDiff","Table","className","styles","table","variant","classNames","title","positive","negative","slice","colSpan","header","totalRow","TotalTable","current","red","tableWrapper","titleRow","App","useState","JSON","parse","localStorage","getItem","setData","setCoinsPrice","fetchRates","forEach","a","fetch","then","response","json","symbol","price","prevState","console","error","handleChange","e","files","target","file","reader","FileReader","rABS","readAsBinaryString","onload","bstr","result","wb","XLSX","read","type","wsname","SheetNames","ws","Sheets","utils","sheet_to_json","filter","includes","coins","Array","from","Set","item","results","setItem","stringify","readAsArrayBuffer","handleFile","useEffect","timerId","setInterval","clearInterval","app","Container","input","onChange","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4ec61b7f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"TableBlock_table__3J1J1\",\"title\":\"TableBlock_title__oqcT7\",\"positive\":\"TableBlock_positive__2JUG4\",\"negative\":\"TableBlock_negative__3iLEv\",\"header\":\"TableBlock_header__34bI2\",\"totalRow\":\"TableBlock_totalRow__8iUvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tableWrapper\":\"TotalTable_tableWrapper__2szHx\",\"table\":\"TotalTable_table__Mltg9\",\"titleRow\":\"TotalTable_titleRow__1YDvm\",\"totalRow\":\"TotalTable_totalRow__3L-Et\",\"positive\":\"TotalTable_positive__2hvRs\",\"negative\":\"TotalTable_negative__1i0YO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3BT4Y\",\"input\":\"App_input__1k4p7\"};","const fixedNum = (num, symbols) => parseFloat(Number(num).toFixed(symbols));\n\nexport default fixedNum;\n","import { Table } from 'react-bootstrap';\nimport classNames from 'classnames';\n\nimport fixedNum from '../../helpers/fixedNum';\n\nimport styles from './TableBlock.module.scss';\n\nconst TableBlock = ({ data, coinsPrice }) => {\n\n  return Object.keys(data).map(coin => {\n\n      const orderAmount = data[coin].reduce((reducer, row) => row[2] === 'BUY' ? reducer + +row[4] : reducer - +row[4], 0) * (1 - 0.001);\n      const total = fixedNum(data[coin].reduce((reducer, row) => row[2] === 'BUY' ? reducer + +row[7] : reducer - +row[7], 0), 2);\n      const currentValue = fixedNum(coinsPrice[coin] * orderAmount, 2);\n      const diff = fixedNum(currentValue - total, 2);\n      const percentage = fixedNum(currentValue * 100 / total, 2);\n      const percentDiff = fixedNum(percentage - 100, 2);\n\n      return (\n        <Table className={styles.table} variant='dark' key={coin}>\n          <thead>\n          <tr className={classNames(styles.title, { [styles.positive]: diff >= 0, [styles.negative]: diff < 0 })}>\n            <th>{coin.slice(0, -4)}</th>\n            <th colSpan='8'>{diff ? `${diff}$ (${percentDiff}%)` : 'Loading...'}</th>\n          </tr>\n          <tr className={styles.header}>\n            <th>Date</th>\n            <th>Price (current)</th>\n            <th>Total (current)</th>\n            <th>Order Amount (fee)</th>\n          </tr>\n          </thead>\n          <tbody>\n          {data[coin].map(row => (\n            <tr key={row[0]}>\n              <td>{row[0]}</td>\n              <td>{fixedNum(row[5], 4)}</td>\n              <td>${fixedNum(row[7], 2)}</td>\n              <td>{row[4]} ({fixedNum(row[4] - row[4] * (1 - 0.001), 8)})</td>\n            </tr>\n          ))}\n          <tr className={styles.totalRow}>\n            <td>Total</td>\n            <td>{fixedNum(total / orderAmount, 4)} ({fixedNum(coinsPrice[coin], 4) || 'Loading...'})</td>\n            <td>{total}$ ({`${currentValue}$` || 'Loading...'})</td>\n            <td>{fixedNum(orderAmount, 5)}</td>\n          </tr>\n          </tbody>\n        </Table>\n      );\n    }\n  );\n};\n\nexport default TableBlock;\n","import { Table } from 'react-bootstrap';\n\nimport fixedNum from '../../helpers/fixedNum';\n\nimport styles from './TotalTable.module.scss';\nimport classNames from 'classnames';\n\nconst TotalTable = ({ data, coinsPrice }) => {\n\n  const total = Object.keys(data).reduce((reducer, coin) => {\n    return reducer + fixedNum(data[coin].reduce((reducer, row) => reducer + +row[7], 0), 2);\n  }, 0);\n  const current = Object.keys(data).reduce((reducer, coin) => {\n    const orderAmount = data[coin].reduce((red, row) => red + +row[4], 0) * (1 - 0.001);\n    return reducer + (orderAmount * coinsPrice[coin]);\n  }, 0);\n  const diff = fixedNum(current - total, 2);\n  const percentage = fixedNum(current * 100 / total, 2);\n  const percentDiff = fixedNum(percentage - 100, 2);\n\n  return (<div className={styles.tableWrapper}>\n      <Table className={styles.table}>\n        <thead>\n        <tr className={styles.titleRow}>\n          <th>Total Spend</th>\n          <th>Current Value</th>\n          <th>Diff</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr className={classNames(styles.totalRow, { [styles.positive]: diff >= 0, [styles.negative]: diff < 0 })}>\n          <td>{fixedNum(total, 2)}$</td>\n          <td>{fixedNum(current, 2)}$</td>\n          <td>{diff}$ ({percentDiff}%)</td>\n        </tr>\n        </tbody>\n      </Table>\n    </div>\n  );\n};\n\nexport default TotalTable;\n","import { useEffect, useState } from 'react';\nimport { Container } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport XLSX from 'xlsx';\nimport { RecoilRoot } from 'recoil';\n\nimport TableBlock from '../TableBlock';\nimport TotalTable from '../TotalTable';\n\nimport styles from './App.module.scss';\n\nconst App = () => {\n\n  const [data, setData] = useState(JSON.parse(localStorage.getItem('data')));\n  const [coinsPrice, setCoinsPrice] = useState({});\n\n  const fetchRates = () => {\n    data && Object.keys(data).forEach(async coin => {\n      try {\n        await fetch(`https://api1.binance.com/api/v3/ticker/price?symbol=${coin}`)\n        .then(response => response.json())\n        .then(({ symbol, price }) => setCoinsPrice(prevState => ({ ...prevState, [symbol]: price })));\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  };\n\n  const handleFile = (file) => {\n    const reader = new FileReader();\n    const rABS = !!reader.readAsBinaryString;\n    reader.onload = e => {\n      /* Parse data */\n      const bstr = e.target.result;\n      const wb = XLSX.read(bstr, { type: rABS ? 'binary' : 'array' });\n      /* Get first worksheet */\n      const wsname = wb.SheetNames[0];\n      const ws = wb.Sheets[wsname];\n      /* Convert array of arrays */\n      const data = XLSX.utils.sheet_to_json(ws, { header: 1 })\n      .filter(row => row.includes('BUY') || row.includes('SELL'));\n\n      const coins = Array.from(new Set(data.map(item => item[1])));\n\n      const results = {};\n\n      coins.forEach(coin => {\n        results[coin] = data.filter(item => item[1] === coin);\n      });\n\n      setData(results);\n      localStorage.setItem('data', JSON.stringify(results));\n    };\n    if (rABS) {\n      reader.readAsBinaryString(file);\n    } else {\n      reader.readAsArrayBuffer(file);\n    }\n  };\n\n  const handleChange = (e) => {\n    const files = e.target.files;\n    if (files && files[0]) handleFile(files[0]);\n  };\n\n  useEffect(() => {\n    fetchRates();\n    const timerId = setInterval(() => {\n      fetchRates();\n    }, 10000);\n\n    return () => clearInterval(timerId);\n\n  }, [data]);\n\n  return (\n    <RecoilRoot>\n      <div className={styles.app}>\n        <Container>\n          <input className={styles.input} onChange={(e) => handleChange(e)} type='file' />\n          {data && <TotalTable data={data} coinsPrice={coinsPrice} />}\n          {data && <TableBlock data={data} coinsPrice={coinsPrice} />}\n        </Container>\n      </div>\n    </RecoilRoot>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}